(function(e){function t(t){for(var o,a,c=t[0],u=t[1],i=t[2],d=0,p=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);s&&s(t);while(p.length)p.shift()();return l.push.apply(l,i||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],o=!0,c=1;c<n.length;c++){var u=n[c];0!==r[u]&&(o=!1)}o&&(l.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={app:0},l=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/vue-3-text-editor/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var s=u;l.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"03fd":function(e,t,n){},"0ace":function(e,t,n){},"0e00":function(e,t,n){"use strict";n("72b5")},"35ab":function(e,t,n){"use strict";n("0ace")},"412f":function(e,t,n){"use strict";n("c681")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),r=Object(o["n"])("data-v-b8037eea");Object(o["i"])("data-v-b8037eea");var l={class:"container"},a={class:"result"},c=Object(o["e"])("hr",null,null,-1);Object(o["h"])();var u=r((function(e,t,n,r,u,i){var s=Object(o["l"])("AEditor");return Object(o["g"])(),Object(o["c"])("div",l,[Object(o["e"])(s,{modelValue:e.content,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.content=t})},null,8,["modelValue"]),Object(o["e"])("div",a,[Object(o["e"])("div",{innerHTML:e.content},null,8,["innerHTML"]),c,Object(o["d"])(" "+Object(o["m"])(e.content),1)])])})),i={class:"a-editor"},s=Object(o["e"])("div",{class:"a-editor-header"},[Object(o["e"])("h1",{class:"a-editor-header__title"},"Editor")],-1);function d(e,t,n,r,l,a){var c=Object(o["l"])("AEditorToolbar"),u=Object(o["l"])("AEditorContent");return Object(o["g"])(),Object(o["c"])("div",i,[s,Object(o["e"])(c,{nodeStyle:e.currentNodeStyle,onSetStyle:a.onSetStyle,onExport:a.onExport},null,8,["nodeStyle","onSetStyle","onExport"]),Object(o["e"])(u,{ref:"content",modelValue:n.modelValue,"current-node-id":e.currentNodeId,"current-node-style":e.currentNodeStyle,onSetNode:a.onSetNode,onResetNode:a.onResetNode,"onUpdate:modelValue":a.onUpdateModelValue},null,8,["modelValue","current-node-id","current-node-style","onSetNode","onResetNode","onUpdate:modelValue"])])}var p=Object(o["n"])("data-v-3f8b363f");Object(o["i"])("data-v-3f8b363f");var f={class:"a-editor-toolbar"},b=Object(o["d"])(" Export to JSON ");Object(o["h"])();var y=p((function(e,t,n,r,l,a){var c=Object(o["l"])("ToolbarButtonGroups"),u=Object(o["l"])("ABtn");return Object(o["g"])(),Object(o["c"])("div",f,[Object(o["e"])(c,{groups:e.groups,"node-style":n.nodeStyle,onSetStyle:a.onSetStyle},null,8,["groups","node-style","onSetStyle"]),Object(o["e"])(u,{class:"export-btn",onClick:a.onExport},{default:p((function(){return[b]})),_:1},8,["onClick"])])})),v=Object(o["n"])("data-v-26d21202"),m=v((function(e,t,n,r,l,a){return Object(o["g"])(),Object(o["c"])("button",Object(o["f"])(e.$attrs,{class:a.classes}),[Object(o["k"])(e.$slots,"default",{},void 0,!0)],16)})),O={name:"ABtn",props:{active:{type:Boolean,default:!1}},computed:{classes:function(){return["a-btn",{"a-btn--active":this.active}]}}};n("f700");O.render=m,O.__scopeId="data-v-26d21202";var h=O,S=Object(o["n"])("data-v-52739422"),g=S((function(e,t,n,r,l,a){var c=Object(o["l"])("ABtn");return Object(o["g"])(!0),Object(o["c"])(o["a"],null,Object(o["j"])(n.groups,(function(e){return Object(o["g"])(),Object(o["c"])("div",{class:"toolbar-button-group",key:e.type},[(Object(o["g"])(!0),Object(o["c"])(o["a"],null,Object(o["j"])(e.buttons,(function(t){return Object(o["g"])(),Object(o["c"])(c,{key:t.value,class:"toolbar-button-group__item",active:a.isButtonActive(e.type,t.value),onClick:function(n){return a.onSetStyle(e.type,t.value)}},{default:S((function(){return[Object(o["d"])(Object(o["m"])(t.label),1)]})),_:2},1032,["active","onClick"])})),128))])})),128)})),j={name:"ToolbarGroup",emits:["setStyle"],props:{groups:{type:Array,required:!0},nodeStyle:{type:Object,default:null}},components:{ABtn:h},computed:{isButtonActive:function(){var e=this;return function(t,n){return e.nodeStyle&&e.nodeStyle[t]===n}}},methods:{onSetStyle:function(e,t){this.$emit("setStyle",{type:e,value:t})}}};n("0e00");j.render=g,j.__scopeId="data-v-52739422";var N=j,T={FONT_WEIGHT:"fontWeight",FONT_SIZE:"fontSize",FONT_FAMILY:"fontFamily",BG_COLOR:"backgroundColor",COLOR:"color"},x={name:"AEditorToolbar",emits:["setStyle","export"],props:{nodeStyle:{type:Object,default:null}},components:{ABtn:h,ToolbarButtonGroups:N},data:function(){return{groups:[{type:T.FONT_WEIGHT,buttons:[{label:"Thin",value:"300"},{label:"Regular",value:"400"},{label:"Bold",value:"700"}]},{type:T.FONT_SIZE,buttons:[{label:"16px",value:"16px"},{label:"18px",value:"18px"},{label:"20px",value:"20px"}]},{type:T.FONT_FAMILY,buttons:[{label:"Open Sans",value:"Open Sans"},{label:"Arial",value:"Arial"}]},{type:T.BG_COLOR,buttons:[{label:"Bg Orange",value:"rgb(255, 87, 34)"},{label:"Bg Brown",value:"rgb(121, 85, 72)"}]},{type:T.COLOR,buttons:[{label:"White",value:"rgb(255, 255, 255)"},{label:"Black",value:"rgb(0, 0, 0)"}]}]}},methods:{onExport:function(){this.$emit("export")},onSetStyle:function(e){this.$emit("setStyle",e)}}};n("cf7f");x.render=y,x.__scopeId="data-v-3f8b363f";var E=x,A=Object(o["n"])("data-v-4d27d1c3"),C=A((function(e,t,n,r,l,a){return Object(o["g"])(),Object(o["c"])("div",{ref:"editor",class:"a-editor-content",contenteditable:"",id:"editor",onInput:t[1]||(t[1]=function(){return a.onEmitContent&&a.onEmitContent.apply(a,arguments)})},null,544)})),_=n("5530"),I=(n("d81d"),n("fb6a"),function(e,t){var n;return function(){clearTimeout(n),n=setTimeout((function(){e()}),t)}}),V=function(e,t,n){var o=[];if("string"===typeof e){var r=e.slice(0,t),l=e.slice(n);o.push(r||null),o.push(e.slice(t,n)),o.push(l||null)}return o},k={debounce:I,splitTextContent:V},B=n("3835"),$=function(e){var t=e.commonAncestorContainer.textContent;return k.splitTextContent(t,e.startOffset,e.endOffset)},R={splitRangeText:$},w=function(e){var t=document.createRange(),n=e.childNodes[0];t.setStart(n,0),t.setEnd(n,n.length);var o=window.getSelection();o.removeAllRanges(),o.addRange(t)},L=function(e){var t=e.commonAncestorContainer,n=t.parentElement,o=R.splitRangeText(e),r=Object(B["a"])(o,3),l=r[0],a=r[1],c=r[2],u=document.createElement("span");u.textContent=a,u.setAttribute("id","editor-span-"+Date.now());var i=document.createDocumentFragment();return i.appendChild(u),l&&i.prepend(l),c&&i.append(c),n.replaceChild(i,e.commonAncestorContainer),w(u),u},M={setSelectionToElement:w,makeSpanAtSelection:L},F=(n("159b"),n("07ac"),n("b64b"),function(e,t){var n=t.type,o=t.value;e.style[n]===o?e.style[n]=null:e.style[n]=o});function P(e){var t=document.getElementById(e);if(!t)return null;var n={};return Object.values(T).forEach((function(e){t.style[e]&&(n[e]=t.style[e])})),Object.keys(n).length>0?n:null}var G={parseStyle:P,toggleStyle:F},H=(n("a15b"),n("0481"),n("4fad"),function(e){var t=[];return e.childNodes.forEach((function(e){var n=t[t.length-1]||null,o=e.textContent,r=null;if(e.nodeType!==Node.TEXT_NODE&&(r=G.parseStyle(e.getAttribute("id"))),!n||" "!==o&&(r||n.style))if(r){if(n.style){var l=Object.entries(n.style).flat(2).join(""),a=Object.entries(r).flat(2).join("");if(a===l)return void(n.text+=o)}t.push({text:o,style:r})}else t.push({text:o});else n.text+=o})),t}),J={parseContent:H},U={name:"AEditorContent",data:function(){return{rage:null}},emits:["update:modelValue","setNode","resetNode"],props:{modelValue:{type:String,default:""},currentNodeId:{type:String,default:null},currentNodeStyle:{type:Object,default:null}},mounted:function(){this.$refs.editor.innerHTML=this.modelValue,this.handleSelection=k.debounce(this.handleSelection,200),document.addEventListener("selectionchange",this.handleSelection)},unmounted:function(){document.removeEventListener("selectionchange",this.handleSelection)},methods:{onEmitContent:function(){this.$emit("update:modelValue",this.$refs.editor.innerHTML)},onSetStyle:function(e){var t=e.type,n=e.value;if(this.rage)if("editor"!==this.currentNodeId)this.applyStyleToCurrentNode({styleType:t,styleValue:n});else{if(this.rage.collapsed)return;this.makeStyledNode({styleType:t,styleValue:n})}},applyStyleToCurrentNode:function(e){var t=e.styleType,n=e.styleValue,o=document.getElementById(this.currentNodeId);this.applyStyleToNode(o,{styleType:t,styleValue:n})},applyStyleToNode:function(e,t){var n=t.styleType,o=t.styleValue;G.toggleStyle(e,{type:n,value:o}),this.$emit("setNode",{style:G.parseStyle(this.currentNodeId)}),this.onEmitContent()},makeStyledNode:function(e){var t=this,n=e.styleType,o=e.styleValue,r=M.makeSpanAtSelection(this.rage);this.$emit("setNode",{nodeId:r.getAttribute("id")}),this.$nextTick((function(){t.applyStyleToNode(r,{styleType:n,styleValue:o})}))},handleSelection:function(){this.rage=null,this.$emit("resetNode");var e=document.getSelection(),t=e.getRangeAt(0),n=t.commonAncestorContainer,o=n.parentElement;if(o.closest("#editor")){var r=o.getAttribute("id"),l=null;"SPAN"===o.tagName&&(l=G.parseStyle(r)),this.$emit("setNode",{nodeId:r,style:l}),this.rage=t}},export:function(){var e=J.parseContent(this.$refs.editor);return e=e.map((function(e){return e.style?Object(_["a"])({text:e.text},e.style):e})),e}}};n("35ab");U.render=C,U.__scopeId="data-v-4d27d1c3";var W=U,D={name:"AEditor",emits:["update:modelValue"],components:{AEditorToolbar:E,AEditorContent:W},data:function(){return{currentNodeId:null,currentNodeStyle:null}},props:{modelValue:{type:String,default:""}},methods:{onUpdateModelValue:function(e){this.$emit("update:modelValue",e)},onSetNode:function(e){var t=e.nodeId,n=void 0===t?null:t,o=e.style,r=void 0===o?null:o;this.currentNodeId=n||this.currentNodeId,this.currentNodeStyle=r||this.currentNodeStyle},onResetNode:function(){this.currentNodeId=null,this.currentNodeStyle=null},onSetStyle:function(e){this.$refs.content.onSetStyle(e)},onExport:function(){var e=this.$refs.content.export();console.log("JSON: ",JSON.stringify(e,2,2)),alert("JSON in console")}}};n("412f");D.render=d;var z=D,Y='\n  Lorem ipsum dolor sit amet, consectetur adipisicing elit.\n  <span\n    id="id-34343"\n    style="\n      font-size: 18px;\n      background-color: rgb(121, 85, 72);\n      color: rgb(255, 255, 255);\n    "\n  >\n    Praesentium porro amet\n  </span>\n  , eveniet omnis necessitatibus adipisci.\n',Z={name:"App",components:{AEditor:z},data:function(){return{content:Y}}};n("c065");Z.render=u,Z.__scopeId="data-v-b8037eea";var q=Z;n("c1c3");Object(o["b"])(q).mount("#app")},"72b5":function(e,t,n){},"830a":function(e,t,n){},b303:function(e,t,n){},c065:function(e,t,n){"use strict";n("b303")},c1c3:function(e,t,n){},c681:function(e,t,n){},cf7f:function(e,t,n){"use strict";n("830a")},f700:function(e,t,n){"use strict";n("03fd")}});
//# sourceMappingURL=app.27097164.js.map